<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navbar</title>
    <link rel="stylesheet" href="/static/css/navbar.css">
</head>

<body>
    {% block navbar %}
    <div class="navbar">
        <div class="logo">
            <button class="retract-button" onclick="toggleSidebar()">
                <svg data-name="Layer 1" id="Layer_1" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <style>
                            .cls-1 {
                                fill: none;
                                stroke: #ffffff;
                                stroke-linecap: round;
                                stroke-linejoin: round;
                                stroke-width: 2px;
                            }
                        </style>
                    </defs>
                    <title />
                    <line class="cls-1" x1="1" x2="47" y1="10" y2="10" />
                    <line class="cls-1" x1="1" x2="47" y1="24" y2="24" />
                    <line class="cls-1" x1="1" x2="47" y1="38" y2="38" />
                </svg>
            </button>
            <a href="/">DjangoTube</a>
        </div>
        <div class="searchbar">
            <input type="text" id="search-input" placeholder="Search" oninput="filterOptions()">
            <div class="dropdown" id="search-dropdown" style="display: none;">
                {% for i in videos %}
                <a href="/video?id={{ i.id }}">{{ i.title }}</a>
                {% endfor %}
                <!-- Add more options as needed -->
            </div>
        </div>
        <div class="menu">
            <a href="#">Home</a>
            {% if request.session.username %}
            <a href="#" onclick="showDropDown()">{{ request.session.username }}</a>
            <div class="dropdown" id="dropdown" style="display: none;">
                <a href="/user?name={{ request.session.username }}">Your Videos</a>
                <a href="/upload">Upload Video</a>
                <a href="/delete">Delete Video</a>
                <a href="/logout">Logout</a>
                {% else %}
            <a href="#" onclick="showDropDown()">Account</a>
            <div class="dropdown" id="dropdown" style="display: none;">
                <a href="/login">Login</a>
                <a href="/register">Register</a>
                {% endif %}
            </div>
        </div>
    </div>

    <script type="text/javascript">
        function showDropDown() {
            dropdown = document.getElementById("dropdown");
            if (dropdown.style.display != "none") {
                dropdown.style.display = "none";
            } else {
                dropdown.style.display = "flex";
            }
        }

        function filterOptions() {
            const searchInput = document.getElementById("search-input");
            const searchValue = searchInput.value.toUpperCase();
            const dropdownOptions = document.getElementById("search-dropdown").getElementsByTagName("a");

            for (let i = 0; i < dropdownOptions.length; i++) {
                const option = dropdownOptions[i];
                const optionText = option.textContent || option.innerText;
                if (optionText.toUpperCase().indexOf(searchValue) > -1) {
                    option.style.display = "block";
                } else {
                    option.style.display = "none";
                }
            }

            const searchDropdown = document.getElementById("search-dropdown");
            if (searchValue === "") {
                searchDropdown.style.display = "none";
            } else {
                searchDropdown.style.display = "block";
            }
        }
    </script>
    {% endblock navbar %}
</body>

</html>
